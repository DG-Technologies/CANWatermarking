<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>CAN Conditioner Devices</title>
<!--
    <script src="jsN/jquery-3.5.0.min.js"></script>
-->
    <script src="https://sdk.amazonaws.com/js/aws-sdk-2.668.0.min.js"></script>
<!--
	<script src="jsN/backend.js"></script>
-->
</head>
<body>
	 <div id="results">data</div>
	  <script type="application/javascript">
		// Set your needed values
		var USER_POOL_ID = 'us-east-1_CVvx2Qod7'
		var IDENTITY_POOL_ID = 'us-east-1:c58ce90c-3e93-44f9-b005-edfa473a695b';
		var REGION = 'us-east-1';
		
		const urlParams = new URLSearchParams(window.location.hash);
		//If receiving the token directly,
		authable = urlParams.get('#id_token');
		
		console.log(authable);
			
		AWS.config.region = REGION;
		AWS.config.credentials = new AWS.CognitoIdentityCredentials({
			IdentityPoolId: IDENTITY_POOL_ID,
			//~ Logins: {
					//~ 'cognito-idp.us-east-1.amazonaws.com/us-east-1_CVvx2Qod7' : authable
				//~ }
			});
		
		var lambda = new AWS.Lambda({apiVersion: '2015-03-31'});
		
		var params = {
		  FunctionName: "CANWatermarking-dev-auth", 
		  Payload: "{'aasasd':'haasd'}"
		 };
		 lambda.invoke(params, function(err, data) {
		   if (err) console.log(err, err.stack); // an error occurred
		   else     console.log(data);           // successful response
	 });
		
	  </script>
<!--
    <div id="authTokenModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="authToken">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel">Your Auth Token</h4>
                </div>
                <div class="modal-body">
                    <textarea class="authToken" id='authToken'></textarea>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <a href="signin.html">Sign in.</a>
    
    
-->
    
<!--
    <script src="js/vendor/jquery-3.1.0.js"></script>
    <script src="js/vendor/aws-cognito-sdk.min.js"></script>
    <script src="js/vendor/amazon-cognito-identity.min.js"></script>
    <script src="js/config.js"></script>
    <script src="js/cognito-auth.js"></script>
    <script>
        $(document).ready( function(){
            console.log("authToken: ");
            console.log(CANConditioner.authToken);
            CANConditioner.authToken.resolve('fulfilled').then(function(value){console.log(value);});

        });
    </script>
-->
</body>

</html>
